import{a as E}from"./chunk-TBHU6ZU3.js";import{b as H,c as B}from"./chunk-MZQCBFKV.js";import"./chunk-GKJMT5CE.js";import{a as U,b as $}from"./chunk-KD4OITAO.js";import"./chunk-V3RLZPWU.js";import"./chunk-4O3FVBGX.js";import{a as D,b as V}from"./chunk-DUHWH566.js";import"./chunk-MAKQHRFT.js";import{b as j}from"./chunk-XEILQOEW.js";import{a as N,b as R}from"./chunk-BK62AMNQ.js";import{Aa as v,Ea as z,i as A,k as T,l as F,r as k,z as w}from"./chunk-IGLYEISI.js";import{$ as h,$a as s,Ab as p,Ba as b,Da as o,Nb as M,Oa as d,Ob as m,P as u,Pb as g,T as _,Va as x,Vb as I,Wb as O,Yb as P,_ as C,lb as r,mb as n,nb as a,ob as c,vb as y,zb as S}from"./chunk-GHXVRSLK.js";var f=class e{constructor(i){this.http=i}collectionsApiUrl="/api/collections";getMyItems(){return this.http.get(`${this.collectionsApiUrl}/my-items`)}selectAvatar(i){return this.http.put(`${this.collectionsApiUrl}/select-avatar`,{avatarId:i})}static \u0275fac=function(t){return new(t||e)(_(w))};static \u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"})};var J=e=>({selected:e});function L(e,i){e&1&&c(0,"p-progressSpinner")}function W(e,i){if(e&1&&(n(0,"p-card",3)(1,"p"),m(2),a()()),e&2){let t=p();o(2),g(t.error)}}function X(e,i){e&1&&(c(0,"i",10),m(1," Avatarlar\u0131m "))}function Z(e,i){e&1&&(n(0,"div",16),c(1,"i",17),a())}function ee(e,i){if(e&1){let t=y();n(0,"div",11)(1,"div",12),S("click",function(){let Q=C(t).$implicit,Y=p(2);return h(Y.selectAvatar(Q))}),c(2,"img",13),n(3,"span",14),m(4),a(),s(5,Z,2,0,"div",15),a()()}if(e&2){let t=i.$implicit,l=p(2);o(),r("ngClass",P(5,J,l.isAvatarSelected(t))),o(),r("src",t.image_path,b)("alt",t.name),o(2),g(t.name),o(),r("ngIf",l.isAvatarSelected(t))}}function te(e,i){e&1&&(c(0,"i",18),m(1," Kazand\u0131\u011F\u0131m Rozetler "))}function ie(e,i){if(e&1&&(n(0,"div",19)(1,"div",20),c(2,"i"),n(3,"span",14),m(4),a()()()),e&2){let t=i.$implicit;o(),r("pTooltip",t.description),o(),M(I("badge-icon pi ",t.icon)),o(2),g(t.name)}}function oe(e,i){e&1&&(n(0,"div",21)(1,"p",22),m(2,"Hen\xFCz hi\xE7 rozet kazanmad\u0131n. Quizleri \xE7\xF6zmeye devam et!"),a()())}function ne(e,i){if(e&1&&(n(0,"div")(1,"p-card",4),s(2,X,2,0,"ng-template",5),n(3,"div",6),s(4,ee,6,7,"div",7),a()(),n(5,"p-card"),s(6,te,2,0,"ng-template",5),n(7,"div",6),s(8,ie,5,5,"div",8)(9,oe,3,0,"div",9),a()()()),e&2){let t=p();o(4),r("ngForOf",t.avatars),o(4),r("ngForOf",t.badges),o(),r("ngIf",t.badges.length===0)}}var K=class e{constructor(i,t,l){this.collectionsService=i;this.authService=t;this.messageService=l}avatars=[];badges=[];loading=!0;error=null;ngOnInit(){this.loadMyItems()}loadMyItems(){this.loading=!0,this.collectionsService.getMyItems().subscribe({next:i=>{this.avatars=i.avatars,this.badges=i.badges,this.loading=!1},error:i=>{this.error="Koleksiyonlar y\xFCklenirken bir hata olu\u015Ftu.",this.loading=!1,console.error(i)}})}selectAvatar(i){this.authService.userProfileImage()!==i.image_path&&this.collectionsService.selectAvatar(i.id).subscribe({next:t=>{this.messageService.add({severity:"success",summary:"Ba\u015Far\u0131l\u0131",detail:t.message}),this.authService.updateUserProfileImage(t.image_path)},error:t=>{this.messageService.add({severity:"error",summary:"Hata",detail:t.error.message||"Avatar se\xE7ilemedi."})}})}isAvatarSelected(i){return this.authService.userProfileImage()===i.image_path}static \u0275fac=function(t){return new(t||e)(d(f),d(E),d(v))};static \u0275cmp=x({type:e,selectors:[["app-collections"]],features:[O([v])],decls:5,vars:3,consts:[[1,"collections-page"],[4,"ngIf"],["header","Hata",4,"ngIf"],["header","Hata"],["styleClass","mb-4"],["pTemplate","title"],[1,"grid"],["class","col-6 md:col-3 lg:col-2",4,"ngFor","ngForOf"],["class","col-6 md:col-4 lg:col-3",4,"ngFor","ngForOf"],["class","col-12 text-center p-5",4,"ngIf"],[1,"pi","pi-user-edit","mr-2"],[1,"col-6","md:col-3","lg:col-2"],[1,"collection-item","avatar-item","p-ripple",3,"click","ngClass"],[1,"avatar-image",3,"src","alt"],[1,"item-name"],["class","selected-overlay",4,"ngIf"],[1,"selected-overlay"],[1,"pi","pi-check-circle"],[1,"pi","pi-shield","mr-2"],[1,"col-6","md:col-4","lg:col-3"],["tooltipPosition","top",1,"collection-item","badge-item",3,"pTooltip"],[1,"col-12","text-center","p-5"],[1,"text-color-secondary"]],template:function(t,l){t&1&&(c(0,"p-toast"),n(1,"div",0),s(2,L,1,0,"p-progressSpinner",1)(3,W,3,1,"p-card",2)(4,ne,10,3,"div",1),a()),t&2&&(o(2),r("ngIf",l.loading),o(),r("ngIf",l.error),o(),r("ngIf",!l.loading&&!l.error))},dependencies:[k,A,T,F,R,N,z,$,U,V,D,B,H,j],styles:[".collections-page[_ngcontent-%COMP%]   .collection-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;border-radius:var(--border-radius);background:var(--surface-card);border:1px solid var(--surface-border);text-align:center;transition:all .2s ease-in-out;position:relative;overflow:hidden}.collections-page[_ngcontent-%COMP%]   .avatar-item[_ngcontent-%COMP%]{cursor:pointer}.collections-page[_ngcontent-%COMP%]   .avatar-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 4px 12px #0000001a}.collections-page[_ngcontent-%COMP%]   .avatar-item.selected[_ngcontent-%COMP%]{border-color:var(--primary-color);box-shadow:0 0 15px var(--primary-300)}.collections-page[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:.75rem;border:3px solid var(--surface-border)}.collections-page[_ngcontent-%COMP%]   .badge-item[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-color);margin-bottom:.75rem}.collections-page[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem}.collections-page[_ngcontent-%COMP%]   .selected-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(var(--primary-color-rgb),.5);display:flex;align-items:center;justify-content:center;color:#fff;font-size:3rem}"]})};export{K as CollectionsComponent};
