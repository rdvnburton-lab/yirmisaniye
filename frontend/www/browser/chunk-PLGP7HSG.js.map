{
  "version": 3,
  "sources": ["src/app/services/collections.service.ts", "src/app/pages/collections/collections.component.ts", "src/app/pages/collections/collections.component.html"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport interface Avatar {\r\n  id: number;\r\n  name: string;\r\n  image_path: string;\r\n}\r\n\r\nexport interface Badge {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  icon: string;\r\n}\r\n\r\nexport interface MyItemsResponse {\r\n  avatars: Avatar[];\r\n  badges: Badge[];\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CollectionsService {\r\n  private collectionsApiUrl = '/api/collections';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getMyItems(): Observable<MyItemsResponse> {\r\n    return this.http.get<MyItemsResponse>(`${this.collectionsApiUrl}/my-items`);\r\n  }\r\n\r\n  selectAvatar(avatarId: number): Observable<{ message: string, image_path: string }> {\r\n    return this.http.put<{ message: string, image_path: string }>(`${this.collectionsApiUrl}/select-avatar`, { avatarId });\r\n  }\r\n}", "import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CollectionsService, Avatar, Badge } from '../../services/collections.service';\r\nimport { AuthService } from '../auth/auth.service';\r\nimport { CardModule } from 'primeng/card';\r\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\r\nimport { TooltipModule } from 'primeng/tooltip';\r\nimport { MessageService } from 'primeng/api';\r\nimport { ToastModule } from 'primeng/toast';\r\nimport { RippleModule } from 'primeng/ripple';\r\n\r\n@Component({\r\n  selector: 'app-collections',\r\n  standalone: true,\r\n  imports: [\r\n    CommonModule,\r\n    CardModule,\r\n    ProgressSpinnerModule,\r\n    TooltipModule,\r\n    ToastModule,\r\n    RippleModule\r\n  ],\r\n  templateUrl: './collections.component.html',\r\n  styleUrls: ['./collections.component.scss'],\r\n  providers: [MessageService]\r\n})\r\nexport class CollectionsComponent implements OnInit {\r\n  avatars: Avatar[] = [];\r\n  badges: Badge[] = [];\r\n  loading = true;\r\n  error: string | null = null;\r\n\r\n  constructor(\r\n    private collectionsService: CollectionsService,\r\n    private authService: AuthService,\r\n    private messageService: MessageService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadMyItems();\r\n  }\r\n\r\n  loadMyItems(): void {\r\n    this.loading = true;\r\n    this.collectionsService.getMyItems().subscribe({\r\n      next: (data) => {\r\n        this.avatars = data.avatars;\r\n        this.badges = data.badges;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Koleksiyonlar yüklenirken bir hata oluştu.';\r\n        this.loading = false;\r\n        console.error(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  selectAvatar(avatar: Avatar): void {\r\n    if (this.authService.userProfileImage() === avatar.image_path) {\r\n      return; // Zaten seçili olan avatara tekrar tıklanırsa işlem yapma\r\n    }\r\n\r\n    this.collectionsService.selectAvatar(avatar.id).subscribe({\r\n      next: (res) => {\r\n        this.messageService.add({ severity: 'success', summary: 'Başarılı', detail: res.message });\r\n        // AuthService ve localStorage'daki profil resmini güncelle\r\n        this.authService.updateUserProfileImage(res.image_path);\r\n      },\r\n      error: (err) => {\r\n        this.messageService.add({ severity: 'error', summary: 'Hata', detail: err.error.message || 'Avatar seçilemedi.' });\r\n      }\r\n    });\r\n  }\r\n\r\n  isAvatarSelected(avatar: Avatar): boolean {\r\n    return this.authService.userProfileImage() === avatar.image_path;\r\n  }\r\n}", "<p-toast></p-toast>\r\n<div class=\"collections-page\">\r\n    <p-progressSpinner *ngIf=\"loading\"></p-progressSpinner>\r\n\r\n    <p-card *ngIf=\"error\" header=\"Hata\">\r\n        <p>{{ error }}</p>\r\n    </p-card>\r\n\r\n    <div *ngIf=\"!loading && !error\">\r\n        <!-- Avatarlar Bölümü -->\r\n        <p-card styleClass=\"mb-4\">\r\n            <ng-template pTemplate=\"title\">\r\n                <i class=\"pi pi-user-edit mr-2\"></i> Avatarlarım\r\n            </ng-template>\r\n            <div class=\"grid\">\r\n                <div *ngFor=\"let avatar of avatars\" class=\"col-6 md:col-3 lg:col-2\">\r\n                    <div class=\"collection-item avatar-item p-ripple\" (click)=\"selectAvatar(avatar)\"\r\n                        [ngClass]=\"{'selected': isAvatarSelected(avatar)}\">\r\n                        <img [src]=\"avatar.image_path\" [alt]=\"avatar.name\" class=\"avatar-image\">\r\n                        <span class=\"item-name\">{{ avatar.name }}</span>\r\n                        <div *ngIf=\"isAvatarSelected(avatar)\" class=\"selected-overlay\">\r\n                            <i class=\"pi pi-check-circle\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </p-card>\r\n\r\n        <!-- Rozetler Bölümü -->\r\n        <p-card>\r\n            <ng-template pTemplate=\"title\">\r\n                <i class=\"pi pi-shield mr-2\"></i> Kazandığım Rozetler\r\n            </ng-template>\r\n            <div class=\"grid\">\r\n                <div *ngFor=\"let badge of badges\" class=\"col-6 md:col-4 lg:col-3\">\r\n                    <div class=\"collection-item badge-item\" [pTooltip]=\"badge.description\" tooltipPosition=\"top\">\r\n                        <i class=\"badge-icon pi {{ badge.icon }}\"></i>\r\n                        <span class=\"item-name\">{{ badge.name }}</span>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"badges.length === 0\" class=\"col-12 text-center p-5\">\r\n                    <p class=\"text-color-secondary\">Henüz hiç rozet kazanmadın. Quizleri çözmeye devam et!</p>\r\n                </div>\r\n            </div>\r\n        </p-card>\r\n    </div>\r\n</div>"],
  "mappings": "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",
  "names": []
}
