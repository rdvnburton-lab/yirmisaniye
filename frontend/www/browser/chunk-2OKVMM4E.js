import{a as w,b as k}from"./chunk-QNAX6OM2.js";import{a as N,b as R}from"./chunk-X7KCC4V3.js";import{a as V,b as B}from"./chunk-EL2QWLBF.js";import{a as j,b as q}from"./chunk-KIIJUMUO.js";import{a as T,b as Q}from"./chunk-KD4OITAO.js";import{b as A}from"./chunk-DUHWH566.js";import"./chunk-MAKQHRFT.js";import{a as G}from"./chunk-YK547WEA.js";import{a as M,b as F}from"./chunk-BK62AMNQ.js";import{k as O,l as z,q as E,r as D}from"./chunk-IGLYEISI.js";import{$a as v,Ab as y,Da as a,Nb as h,Oa as C,Ob as o,Pb as d,Qb as S,Va as _,Vb as b,dc as P,fc as I,lb as l,mb as i,nb as r,ob as s}from"./chunk-GHXVRSLK.js";function L(n,t){n&1&&s(0,"p-progressSpinner")}function U(n,t){if(n&1&&(i(0,"div",4),o(1),r()),n&2){let e=y();a(),d(e.error)}}function K(n,t){if(n&1&&(i(0,"li",32)(1,"div",33),s(2,"i"),i(3,"div")(4,"span",34),o(5),r(),i(6,"div",12),o(7),r()()(),s(8,"p-tag",35),P(9,"number"),r()),n&2){let e=t.$implicit;a(2),h(b("pi ",e.subject_icon||"pi-tag"," text-xl mr-3 text-primary")),a(3),d(e.topic_name),a(2),d(e.subject_name),a(),l("value",I(9,7,e.success_rate,"1.0-0")+"%")("rounded",!0)}}function Y(n,t){n&1&&(i(0,"li",36)(1,"span",37),o(2,"Hen\xFCz yeterli veri yok."),r()())}function Z(n,t){if(n&1&&s(0,"p-chart",38),n&2){let e=y(2);l("data",e.difficultyChartData)("options",e.difficultyChartOptions)}}function $(n,t){n&1&&(i(0,"div",36)(1,"span",37),o(2,"Hen\xFCz yeterli veri yok."),r()())}function J(n,t){if(n&1&&(i(0,"div",5)(1,"div",6)(2,"p-card",7)(3,"div",8)(4,"div",9),s(5,"i",10),i(6,"div",11),o(7),r(),i(8,"div",12),o(9,"Toplam Puan"),r()(),i(10,"div",9),s(11,"i",13),i(12,"div",14),o(13),r(),i(14,"div",12),o(15,"Quiz Say\u0131s\u0131"),r()(),i(16,"div",9),s(17,"i",15),i(18,"div",14),o(19),r(),i(20,"div",12),o(21,"Do\u011Fru Cevap"),r()(),i(22,"div",9),s(23,"i",16),i(24,"div",14),o(25),r(),i(26,"div",12),o(27,"Yanl\u0131\u015F Cevap"),r()()(),s(28,"p-divider"),i(29,"div",17)(30,"div",18),o(31,"Genel Ba\u015Far\u0131 Oran\u0131"),r(),i(32,"p-progressBar",19)(33,"span",20),o(34),r()()()()(),i(35,"div",21)(36,"p-card",22),s(37,"p-chart",23),r()(),i(38,"div",24)(39,"p-card",25)(40,"ul",26),v(41,K,10,10,"li",27)(42,Y,3,0,"li",28),r()()(),i(43,"div",24)(44,"p-card",29)(45,"div",30),v(46,Z,1,2,"p-chart",31)(47,$,3,0,"div",28),r()()()()),n&2){let e=y();a(7),d(e.stats.total_score),a(6),d(e.stats.quizzes_completed),a(6),d(e.stats.total_correct_answers),a(6),d(e.stats.total_wrong_answers),a(7),l("value",e.stats.overall_success_rate)("showValue",!0),a(2),S("",e.stats.overall_success_rate,"%"),a(3),l("data",e.performanceChartData)("options",e.performanceChartOptions),a(4),l("ngForOf",e.stats.best_topics),a(),l("ngIf",e.stats.best_topics.length===0),a(4),l("ngIf",e.difficultyChartData),a(),l("ngIf",!e.difficultyChartData)}}var H=class n{constructor(t){this.quizService=t}loading=!0;error=null;stats=null;performanceChartData;performanceChartOptions;difficultyChartData;difficultyChartOptions;ngOnInit(){this.quizService.getProfileStats().subscribe({next:t=>{this.stats=t,setTimeout(()=>{this.setupPerformanceChart(t),this.setupDifficultyChart(t),this.loading=!1})},error:t=>{this.error="\u0130statistikler y\xFCklenirken bir hata olu\u015Ftu.",this.loading=!1,console.error(t)}})}getDifficultyTagSeverity(t){switch(t){case"easy":return"success";case"medium":return"warn";case"hard":return"danger";default:return"info"}}setupPerformanceChart(t){if(!t.performance_over_time||t.performance_over_time.length===0){this.performanceChartData={},this.performanceChartOptions={};return}let e=getComputedStyle(document.documentElement),p=e.getPropertyValue("--text-color"),f=e.getPropertyValue("--text-color-secondary"),m=e.getPropertyValue("--surface-border").trim(),c=e.getPropertyValue("--primary-500").trim();c||(c="#3B82F6"),m||(m="#dee2e6");let u=document.createElement("canvas").getContext("2d"),g=null;u&&(g=u.createLinearGradient(0,0,0,300),g.addColorStop(0,c+"4D"),g.addColorStop(1,c+"00")),this.performanceChartData={labels:t.performance_over_time.map(x=>new Date(x.quiz_date).toLocaleDateString("tr-TR",{day:"numeric",month:"short"})),datasets:[{label:"G\xFCnl\xFCk Puan",data:t.performance_over_time.map(x=>x.daily_score),fill:!0,borderColor:c,tension:.4,backgroundColor:g||c+"20"}]},this.performanceChartOptions={maintainAspectRatio:!1,aspectRatio:.9,plugins:{legend:{display:!1,labels:{color:p}}},scales:{x:{ticks:{color:f},grid:{color:m}},y:{ticks:{color:f},grid:{color:m}}}}}setupDifficultyChart(t){if(!t.performance_by_difficulty||t.performance_by_difficulty.length===0){this.difficultyChartData=null;return}let e=getComputedStyle(document.documentElement),p=e.getPropertyValue("--text-color"),f=e.getPropertyValue("--green-500").trim(),m=e.getPropertyValue("--yellow-500").trim(),c=e.getPropertyValue("--red-500").trim();f||(f="#4CAF50"),m||(m="#FFC107"),c||(c="#F44336"),this.difficultyChartData={labels:t.performance_by_difficulty.map(u=>u.difficulty.charAt(0).toUpperCase()+u.difficulty.slice(1)),datasets:[{data:t.performance_by_difficulty.map(u=>u.correct_count),backgroundColor:[f,m,c]}]},this.difficultyChartOptions={cutout:"60%",plugins:{legend:{position:"bottom",labels:{color:p}}}}}static \u0275fac=function(e){return new(e||n)(C(G))};static \u0275cmp=_({type:n,selectors:[["app-quiz-stats"]],decls:4,vars:3,consts:[[1,"stats-page","p-fluid"],[4,"ngIf"],["class","p-message p-message-error",4,"ngIf"],["class","grid",4,"ngIf"],[1,"p-message","p-message-error"],[1,"grid"],[1,"col-12","lg:col-4"],["header","Genel Bak\u0131\u015F","styleClass","h-full"],[1,"grid","text-center"],[1,"col-6","stat-box"],[1,"pi","pi-star-fill","text-yellow-500","text-3xl","mb-2"],[1,"text-2xl","font-bold","text-primary"],[1,"text-sm","text-color-secondary"],[1,"pi","pi-book","text-blue-500","text-3xl","mb-2"],[1,"text-2xl","font-bold"],[1,"pi","pi-check-circle","text-green-500","text-3xl","mb-2"],[1,"pi","pi-times-circle","text-red-500","text-3xl","mb-2"],[1,"w-full","px-3"],[1,"font-semibold","mb-2"],["styleClass","h-2rem",3,"value","showValue"],[1,"font-bold","text-lg"],[1,"col-12","lg:col-8"],["header","Son 30 G\xFCnl\xFCk Performans","styleClass","h-full"],["type","line",3,"data","options"],[1,"col-12","lg:col-6"],["header","En Ba\u015Far\u0131l\u0131 Konular\u0131n","styleClass","h-full"],[1,"list-none","p-0","m-0"],["class","flex align-items-center justify-content-between mb-3 p-2 border-round hover:surface-100",4,"ngFor","ngForOf"],["class","text-center p-3",4,"ngIf"],["header","Zorluk Seviyesi Analizi","styleClass","h-full"],[1,"h-full","flex","flex-column","align-items-center","justify-content-center"],["type","doughnut","height","250px",3,"data","options",4,"ngIf"],[1,"flex","align-items-center","justify-content-between","mb-3","p-2","border-round","hover:surface-100"],[1,"flex","align-items-center"],[1,"font-semibold"],["severity","success",3,"value","rounded"],[1,"text-center","p-3"],[1,"text-color-secondary"],["type","doughnut","height","250px",3,"data","options"]],template:function(e,p){e&1&&(i(0,"div",0),v(1,L,1,0,"p-progressSpinner",1)(2,U,2,1,"div",2)(3,J,48,13,"div",3),r()),e&2&&(a(),l("ngIf",p.loading),a(),l("ngIf",p.error),a(),l("ngIf",!p.loading&&p.stats))},dependencies:[D,O,z,F,M,k,w,B,V,A,Q,T,q,j,R,N,E],styles:[".stats-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:1.5rem}.stats-page[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid var(--surface-border)}.stats-page[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.stats-page[_ngcontent-%COMP%]   .p-progressbar[_ngcontent-%COMP%]{height:2rem}.stats-page[_ngcontent-%COMP%]   .p-chart[_ngcontent-%COMP%]{height:100%;min-height:300px}.stats-page[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]{padding:1rem}"]})};export{H as QuizStatsComponent};
