import{a as H}from"./chunk-UUJUPXTB.js";import{b as U,c as F}from"./chunk-MZQCBFKV.js";import{a as q,b as G}from"./chunk-X7KCC4V3.js";import{d as E,f as T}from"./chunk-GKJMT5CE.js";import{a as z,b as B}from"./chunk-KPCZ6BGT.js";import{a as V,b as O}from"./chunk-KD4OITAO.js";import"./chunk-V3RLZPWU.js";import"./chunk-4O3FVBGX.js";import"./chunk-MAKQHRFT.js";import{f as w,g as A,h as D}from"./chunk-OVN2A4WB.js";import"./chunk-XEILQOEW.js";import{a as R,b as j}from"./chunk-BK62AMNQ.js";import{Aa as v,l as P,p as k,r as M}from"./chunk-IGLYEISI.js";import{$ as g,$a as f,Ab as d,Da as n,Oa as c,Ob as a,Pb as m,Qb as S,Va as y,Wb as h,_,dc as C,fc as I,lb as s,mb as r,nb as o,ob as l,vb as b,zb as x}from"./chunk-GHXVRSLK.js";function Q(t,i){t&1&&l(0,"p-progressSpinner")}function J(t,i){if(t&1){let e=b();r(0,"p-card",4)(1,"p"),a(2),o(),r(3,"button",5),x("click",function(){_(e);let u=d();return g(u.router.navigate(["/app/friends"]))}),o()()}if(t&2){let e=d();n(2),m(e.error)}}function K(t,i){if(t&1){let e=b();r(0,"p-button",25),x("click",function(){_(e);let u=d(3);return g(u.sendRequest())}),o()}}function L(t,i){t&1&&l(0,"p-button",26),t&2&&s("disabled",!0)}function W(t,i){t&1&&l(0,"p-button",27),t&2&&s("disabled",!0)}function X(t,i){if(t&1&&(r(0,"div",21),f(1,K,1,0,"p-button",22)(2,L,1,1,"p-button",23)(3,W,1,1,"p-button",24),o()),t&2){let e=d(2);n(),s("ngIf",e.profile.friendshipStatus==="none"),n(),s("ngIf",e.profile.friendshipStatus==="pending"),n(),s("ngIf",e.profile.friendshipStatus==="accepted")}}function Y(t,i){if(t&1&&(r(0,"div",6)(1,"div",7)(2,"p-card")(3,"div",8),l(4,"p-avatar",9),r(5,"h2",10),a(6),o(),r(7,"p",11),a(8),C(9,"date"),o(),f(10,X,4,3,"div",12),o(),r(11,"p-divider",13)(12,"b"),a(13,"\u0130statistikler"),o()(),r(14,"div",14)(15,"div",15)(16,"div",16),l(17,"i",17),r(18,"div",18),a(19),o(),r(20,"div",19),a(21,"Toplam Puan"),o()()(),r(22,"div",15)(23,"div",16),l(24,"i",20),r(25,"div",18),a(26),o(),r(27,"div",19),a(28,"Tamamlanan Quiz"),o()()()()()()()),t&2){let e=d();n(4),s("image",e.profile.user.profile_picture||"assets/images/avatar-placeholder.png"),n(2),m(e.profile.user.username),n(2),S("\xDCyelik Tarihi: ",I(9,6,e.profile.user.created_at,"dd.MM.yyyy")),n(2),s("ngIf",e.profile.friendshipStatus!=="self"),n(9),m(e.profile.stats.total_score),n(7),m(e.profile.stats.quizzes_completed)}}var N=class t{constructor(i,e,p,u){this.route=i;this.router=e;this.friendsService=p;this.messageService=u}profile=null;loading=!0;error=null;ngOnInit(){this.route.paramMap.subscribe(i=>{let e=i.get("username");e?this.loadUserProfile(e):this.router.navigate(["/app/dashboard"])})}loadUserProfile(i){this.loading=!0,this.error=null,this.friendsService.getUserProfile(i).subscribe({next:e=>{this.profile=e,this.loading=!1},error:e=>{this.error=e.error.message||"Profil y\xFCklenirken bir hata olu\u015Ftu.",this.loading=!1}})}sendRequest(){this.profile?.user.username&&this.friendsService.sendFriendRequest(this.profile.user.username).subscribe({next:i=>{this.messageService.add({severity:"success",summary:"Ba\u015Far\u0131l\u0131",detail:i.message}),this.profile&&(this.profile.friendshipStatus="pending")},error:i=>{this.messageService.add({severity:"error",summary:"Hata",detail:i.error.message||"\u0130stek g\xF6nderilemedi."})}})}static \u0275fac=function(e){return new(e||t)(c(E),c(T),c(H),c(v))};static \u0275cmp=y({type:t,selectors:[["app-user-profile"]],features:[h([v])],decls:5,vars:3,consts:[[1,"user-profile-page"],[4,"ngIf"],["header","Hata",4,"ngIf"],["class","grid justify-content-center",4,"ngIf"],["header","Hata"],["pButton","","type","button","label","Geri D\xF6n","icon","pi pi-arrow-left",3,"click"],[1,"grid","justify-content-center"],[1,"col-12","md:col-8","lg:col-6"],[1,"text-center"],["styleClass","w-9rem h-9rem mb-3","shape","circle",3,"image"],[1,"text-3xl","font-bold","mb-1"],[1,"text-color-secondary"],["class","mt-4",4,"ngIf"],["layout","horizontal","align","center","styleClass","my-5"],[1,"grid","text-center"],[1,"col-6"],[1,"p-3"],[1,"pi","pi-star-fill","text-yellow-500","text-4xl","mb-2"],[1,"text-2xl","font-bold"],[1,"text-sm","text-color-secondary"],[1,"pi","pi-book","text-blue-500","text-4xl","mb-2"],[1,"mt-4"],["label","Arkada\u015F Ekle","icon","pi pi-user-plus",3,"click",4,"ngIf"],["label","\u0130stek G\xF6nderildi","icon","pi pi-clock","styleClass","p-button-secondary",3,"disabled",4,"ngIf"],["label","Arkada\u015Fs\u0131n\u0131z","icon","pi pi-users","styleClass","p-button-success",3,"disabled",4,"ngIf"],["label","Arkada\u015F Ekle","icon","pi pi-user-plus",3,"click"],["label","\u0130stek G\xF6nderildi","icon","pi pi-clock","styleClass","p-button-secondary",3,"disabled"],["label","Arkada\u015Fs\u0131n\u0131z","icon","pi pi-users","styleClass","p-button-success",3,"disabled"]],template:function(e,p){e&1&&(l(0,"p-toast"),r(1,"div",0),f(2,Q,1,0,"p-progressSpinner",1)(3,J,4,1,"p-card",2)(4,Y,29,9,"div",3),o()),e&2&&(n(2),s("ngIf",p.loading),n(),s("ngIf",p.error),n(),s("ngIf",!p.loading&&p.profile))},dependencies:[M,P,j,R,B,z,D,w,A,O,V,F,U,G,q,k],styles:[".user-profile-page[_ngcontent-%COMP%]   .p-avatar[_ngcontent-%COMP%]{border:4px solid var(--surface-border);box-shadow:0 4px 10px #0000001a}"]})};export{N as UserProfileComponent};
